{% extends 'base.html.twig' %}

{% block title %}Raporty
{% endblock %}

{% block style %}
	<style>

		p {
			margin: 0;
		}
		.img {
			height: 50px;
			width: 50px;
		}
		.img-modal {
			max-height: 80vh;
		}
		li {}
		.modal-dialog {
			max-width: min-content;
		}
		.box-img {
			width: max-content;
		}
	</style>
{% endblock %}


{% block main %}
	{% block titleSection %}
		<div class="title-section">
			<h2 class="title">Raporty</h2>
		</div>
	{% endblock %}
	{% block section %}
		<section>
			{% include "shared/info.html.twig" %}
			<p>dzień raportu:
				{% set dayName = [
					"poniedziałek",
					"wtorek",
					"środa",
					"czwartek",
					"piątek",
					"sobota",
					"niedziela"] 
				%}
				{{dayName[date - 1]}} każdego tygodnia</p>

			<style></style>

			<a href="{{path('student_report_add')}}" type="button" class="btn btn-dark my-3">Dodaj raport</a>

			{% for report in reports %}
				<div class="border rounded bg-light mb-2">
					<div class="d-flex flex-row justify-content-between">
						<div class="d-flex">
							<div class="p-2 box-img">
								<button type="button" class="btn btn-transparent" data-bs-toggle="modal" data-bs-target="#staticBackdrop{{report.id}}">
									<img class="img rounded object-fit-cover" src="{{reports_url ~ report.frontImg}}" alt="">
									<img class="img rounded object-fit-cover" src="{{reports_url ~ report.sideImg}}" alt="">
									<img class="img rounded object-fit-cover" src="{{reports_url ~ report.backImg}}" alt="">
								</button>
							</div>
							<div class="d-flex flex-column justify-content-between  p-2 ">
								<div class="d-flex justify-content-between align-content-center w-100 ">
									<div class="d-flex align-items-center">
										<p class="h5 mb-0 me-3">{{report.weight}}<small>kg</small>
										</p>
										<p class="h6 mb-0 text-danger">{{report.weightDifference}}<small>kg</small>
										</p>
									</div>
									<p>{{report.date|date("d.m.Y") }}</p>
								</div>
								<ul class="d-flex align-content-center w-100 list-inline mb-0">
									<li class="list-inline-item text-secondary me-3">
										<small>Udo:
											{{report.thighCircumference}}cm</small>
									</li>
									<li class="list-inline-item text-secondary me-3">
										<small>Pas:
											{{report.beltCircumference}}cm</small>
									</li>
									<li class="list-inline-item text-secondary me-3">
										<small>Klatka:
											{{report.chestCircumference}}cm</small>
									</li>
									<li class="list-inline-item text-secondary">
										<small>Biceps:
											{{report.bicepsCircumference}}cm</small>
									</li>
								</ul>
							</div>
						</div>
						<div class="d-flex align-items-center">
							<div class="text-center p-2">
								<p class="mb-1">sprawdzony</p>
								{% if report.verified %}
									<i class="bi bi-check2-circle text-success h3 mb-0 "></i>
								{% else %}
									<i class="bi bi-circle text-danger h3 mb-0"></i>
								{% endif %}
							</div>
							<div class="p-2">
								<a href="" class="btn btn-success">Sprawdź</a>
							</div>
						</div>
					</div>
				</div>
				<div class="modal fade" id="staticBackdrop{{report.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							<div id="carouselExampleFade{{report.id}}" class="carousel slide carousel-fade">
								<div class="carousel-inner">
									<div class="carousel-item active">
										<img class="img-modal object-fit-cover " src="{{reports_url ~ report.frontImg}}" alt="">
									</div>
									<div class="carousel-item">
										<img class="img-modal object-fit-cover " src="{{reports_url ~ report.sideImg}}" alt="">
									</div>
									<div class="carousel-item">
										<img class="img-modal object-fit-cover" src="{{reports_url ~ report.backImg}}" alt="">
									</div>
								</div>
								<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade{{report.id}}" data-bs-slide="prev">
									<span class="carousel-control-prev-icon" aria-hidden="true"></span>
									<span class="visually-hidden">Previous</span>
								</button>
								<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade{{report.id}}" data-bs-slide="next">
									<span class="carousel-control-next-icon" aria-hidden="true"></span>
									<span class="visually-hidden">Next</span>
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		{% endfor %}
	</section>
{% endblock %}{% endblock %}
